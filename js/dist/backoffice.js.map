{"version":3,"file":"backoffice.js","mappings":"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","sources":["webpack://@flamarkt/units/webpack/bootstrap","webpack://@flamarkt/units/webpack/runtime/compat get default export","webpack://@flamarkt/units/webpack/runtime/define property getters","webpack://@flamarkt/units/webpack/runtime/hasOwnProperty shorthand","webpack://@flamarkt/units/webpack/runtime/make namespace object","webpack://@flamarkt/units/external root \"flarum.core.compat['common/extend']\"","webpack://@flamarkt/units/external root \"((flarum.extensions['flamarkt-backoffice']||{})['common']||{})['components/ActiveLinkButton']\"","webpack://@flamarkt/units/external root \"((flarum.extensions['flamarkt-backoffice']||{})['backoffice']||{})['components/BackofficeNav']\"","webpack://@flamarkt/units/external root \"((flarum.extensions['flamarkt-core']||{})['backoffice']||{})['pages/ProductShowPage']\"","webpack://@flamarkt/units/external root \"flarum.core.compat['common/components/Select']\"","webpack://@flamarkt/units/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@flamarkt/units/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@flamarkt/units/external root \"flarum.core.compat['common/Model']\"","webpack://@flamarkt/units/./src/common/models/Unit.ts","webpack://@flamarkt/units/external root \"flarum.core.compat['common/components/Page']\"","webpack://@flamarkt/units/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@flamarkt/units/external root \"((flarum.extensions['flamarkt-backoffice']||{})['common']||{})['states/AbstractListState']\"","webpack://@flamarkt/units/./src/backoffice/states/UnitListState.ts","webpack://@flamarkt/units/external root \"((flarum.extensions['flamarkt-backoffice']||{})['backoffice']||{})['components/AbstractList']\"","webpack://@flamarkt/units/external root \"flarum.core.compat['common/components/Button']\"","webpack://@flamarkt/units/./src/backoffice/components/UnitList.ts","webpack://@flamarkt/units/./src/backoffice/pages/UnitIndexPage.ts","webpack://@flamarkt/units/external root \"((flarum.extensions['flamarkt-backoffice']||{})['common']||{})['pages/AbstractShowPage']\"","webpack://@flamarkt/units/external root \"((flarum.extensions['flamarkt-backoffice']||{})['backoffice']||{})['components/SubmitButton']\"","webpack://@flamarkt/units/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@flamarkt/units/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@flamarkt/units/./src/backoffice/pages/UnitShowPage.ts","webpack://@flamarkt/units/./src/backoffice/compat.ts","webpack://@flamarkt/units/./src/common/compat.ts","webpack://@flamarkt/units/./src/backoffice/index.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = ((flarum.extensions['flamarkt-backoffice']||{})['common']||{})['components/ActiveLinkButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = ((flarum.extensions['flamarkt-backoffice']||{})['backoffice']||{})['components/BackofficeNav'];","const __WEBPACK_NAMESPACE_OBJECT__ = ((flarum.extensions['flamarkt-core']||{})['backoffice']||{})['pages/ProductShowPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Select'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","import Model from 'flarum/common/Model';\n\nexport default class Unit extends Model {\n    slug = Model.attribute<string>('slug');\n    preset = Model.attribute<string>('preset');\n    labelSingular = Model.attribute<string>('labelSingular');\n    labelPlural = Model.attribute<string>('labelPlural');\n    decimals = Model.attribute<number>('decimals');\n    defaultMin = Model.attribute<number>('defaultMin');\n    defaultMax = Model.attribute<number>('defaultMax');\n    defaultStep = Model.attribute<number>('defaultStep');\n\n    apiEndpoint() {\n        return '/flamarkt/units' + (this.exists ? '/' + (this.data as any).id : '');\n    }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Page'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = ((flarum.extensions['flamarkt-backoffice']||{})['common']||{})['states/AbstractListState'];","import AbstractListState from 'flamarkt/backoffice/common/states/AbstractListState';\nimport Unit from '../../common/models/Unit';\n\nexport default class UnitListState extends AbstractListState<Unit> {\n    type() {\n        return 'flamarkt/units';\n    }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = ((flarum.extensions['flamarkt-backoffice']||{})['backoffice']||{})['components/AbstractList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","import AbstractList from 'flamarkt/backoffice/backoffice/components/AbstractList';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport Button from 'flarum/common/components/Button';\nimport Unit from '../../common/models/Unit';\n\nexport default class UnitList extends AbstractList<Unit> {\n    head() {\n        const columns = super.head();\n\n        columns.add('slug', m('th', 'Slug'));\n\n        return columns;\n    }\n\n    columns(unit: Unit) {\n        const columns = super.columns(unit);\n\n        columns.add('slug', m('td', unit.slug()), 10);\n\n        return columns;\n    }\n\n    actions(unit: Unit) {\n        const actions = super.actions(unit);\n\n        actions.add('edit', LinkButton.component({\n            className: 'Button Button--icon',\n            icon: 'fas fa-pen',\n            href: app.route('units.show', {\n                id: unit.id(),\n            }),\n        }));\n\n        actions.add('hide', Button.component({\n            className: 'Button Button--icon',\n            icon: 'fas fa-times',\n        }));\n\n        return actions;\n    }\n}\n","import {Vnode} from 'mithril';\nimport Page from 'flarum/common/components/Page';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport UnitListState from '../states/UnitListState';\nimport UnitList from '../components/UnitList';\n\nexport default class UnitIndexPage extends Page {\n    listState!: UnitListState;\n\n    oninit(vnode: Vnode) {\n        super.oninit(vnode);\n\n        this.listState = new UnitListState();\n        this.listState.refresh();\n    }\n\n    view() {\n        return m('.UnitIndexPage', m('.container', [\n            m('.Form-group', [\n                LinkButton.component({\n                    className: 'Button',\n                    href: app.route('units.show', {\n                        id: 'new',\n                    }),\n                }, 'New unit'),\n            ]),\n            m(UnitList, {\n                state: this.listState,\n            }),\n        ]));\n    }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = ((flarum.extensions['flamarkt-backoffice']||{})['common']||{})['pages/AbstractShowPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = ((flarum.extensions['flamarkt-backoffice']||{})['backoffice']||{})['components/SubmitButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/ItemList'];","import {Children} from 'mithril';\nimport AbstractShowPage from 'flamarkt/backoffice/common/pages/AbstractShowPage';\nimport SubmitButton from 'flamarkt/backoffice/backoffice/components/SubmitButton';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport Select from 'flarum/common/components/Select';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport Unit from '../../common/models/Unit';\n\nexport default class UnitShowPage extends AbstractShowPage {\n    unit: Unit | null = null;\n    dirty: boolean = false;\n    saving: boolean = false;\n    slug: string = '';\n    preset: string | null = null;\n    labelSingular: string = '';\n    labelPlural: string = '';\n    decimals: number = 0;\n    defaultMin: number | null = null;\n    defaultMax: number | null = null;\n    defaultStep: number | null = null;\n\n    newRecord() {\n        return app.store.createRecord('flamarkt-units');\n    }\n\n    findType() {\n        return 'flamarkt/units';\n    }\n\n    show(unit: Unit) {\n        this.unit = unit;\n        this.slug = unit.slug() || '';\n        this.preset = unit.preset() || null;\n        this.labelSingular = unit.labelSingular() || '';\n        this.labelPlural = unit.labelPlural() || '';\n        this.decimals = unit.decimals() || 0;\n        this.defaultMin = unit.defaultMin();\n        this.defaultMax = unit.defaultMax();\n        this.defaultStep = unit.defaultStep();\n\n        app.setTitle(unit.slug());\n        app.setTitleCount(0);\n    }\n\n    view() {\n        if (!this.unit) {\n            return LoadingIndicator.component();\n        }\n\n        return m('form.UnitShowPage', {\n            onsubmit: this.onsubmit.bind(this),\n        }, m('.container', this.fields().toArray()));\n    }\n\n    fields(): ItemList<Children> {\n        const fields = new ItemList<Children>();\n\n        fields.add('slug', m('.Form-group', [\n            m('label', app.translator.trans('flamarkt-units.backoffice.units.field.slug')),\n            m('input.FormControl', {\n                type: 'text',\n                value: this.slug,\n                oninput: (event: Event) => {\n                    this.slug = (event.target as HTMLInputElement).value;\n                    this.dirty = true;\n                },\n            }),\n        ]));\n\n        fields.add('preset', m('.Form-group', [\n            m('label', app.translator.trans('flamarkt-units.backoffice.units.field.preset')),\n            Select.component({\n                value: this.preset || 'default',\n                onchange: (value: string) => {\n                    this.preset = value === 'default' ? null : value;\n                    this.dirty = true;\n                },\n                options: this.presetOptions(),\n            }),\n        ]));\n\n        fields.add('labelSingular', m('.Form-group', [\n            m('label', app.translator.trans('flamarkt-units.backoffice.units.field.labelSingular')),\n            m('input.FormControl', {\n                type: 'text',\n                value: this.labelSingular,\n                oninput: (event: Event) => {\n                    this.labelSingular = (event.target as HTMLInputElement).value;\n                    this.dirty = true;\n                },\n            }),\n        ]));\n\n        fields.add('labelPlural', m('.Form-group', [\n            m('label', app.translator.trans('flamarkt-units.backoffice.units.field.labelPlural')),\n            m('input.FormControl', {\n                type: 'text',\n                value: this.labelPlural,\n                oninput: (event: Event) => {\n                    this.labelPlural = (event.target as HTMLInputElement).value;\n                    this.dirty = true;\n                },\n            }),\n        ]));\n\n        fields.add('decimals', m('.Form-group', [\n            m('label', app.translator.trans('flamarkt-units.backoffice.units.field.decimals')),\n            m('input.FormControl', {\n                type: 'number',\n                value: this.decimals,\n                onchange: (event: Event) => {\n                    this.decimals = parseInt((event.target as HTMLInputElement).value);\n                    this.dirty = true;\n                },\n            }),\n        ]));\n\n        fields.add('defaultMin', m('.Form-group', [\n            m('label', app.translator.trans('flamarkt-units.backoffice.units.field.defaultMin')),\n            m('input.FormControl', {\n                type: 'number',\n                value: this.defaultMin,\n                onchange: (event: Event) => {\n                    const {value} = event.target as HTMLInputElement;\n                    this.defaultMin = value === '' ? null : parseInt(value);\n                    this.dirty = true;\n                },\n            }),\n        ]));\n\n        fields.add('defaultMax', m('.Form-group', [\n            m('label', app.translator.trans('flamarkt-units.backoffice.units.field.defaultMax')),\n            m('input.FormControl', {\n                type: 'number',\n                value: this.defaultMax,\n                onchange: (event: Event) => {\n                    const {value} = event.target as HTMLInputElement;\n                    this.defaultMax = value === '' ? null : parseInt(value);\n                    this.dirty = true;\n                },\n            }),\n        ]));\n\n        fields.add('defaultStep', m('.Form-group', [\n            m('label', app.translator.trans('flamarkt-units.backoffice.units.field.defaultStep')),\n            m('input.FormControl', {\n                type: 'number',\n                value: this.defaultStep,\n                onchange: (event: Event) => {\n                    const {value} = event.target as HTMLInputElement;\n                    this.defaultStep = value === '' ? null : parseInt(value);\n                    this.dirty = true;\n                },\n            }),\n        ]));\n\n        fields.add('submit', m('.Form-group', [\n            SubmitButton.component({\n                loading: this.saving,\n                dirty: this.dirty,\n                exists: this.unit!.exists,\n            }),\n        ]), -10);\n\n        return fields;\n    }\n\n    presetOptions() {\n        return {\n            default: 'No preset',\n            g: 'Grams / KG',\n        };\n    }\n\n    data() {\n        return {\n            slug: this.slug,\n            preset: this.preset,\n            labelSingular: this.labelSingular,\n            labelPlural: this.labelPlural,\n            decimals: this.decimals,\n            defaultMin: this.defaultMin,\n            defaultMax: this.defaultMax,\n            defaultStep: this.defaultStep,\n        };\n    }\n\n    onsubmit(event: Event) {\n        event.preventDefault();\n\n        this.saving = true;\n\n        // @ts-ignore\n        this.unit.save(this.data()).then(unit => {\n            this.unit = unit;\n\n            this.saving = false;\n            this.dirty = false;\n            m.redraw();\n\n            m.route.set(app.route('units.show', {\n                id: unit.id(),\n            }));\n        }).catch(error => {\n            this.saving = false;\n            m.redraw();\n        });\n    }\n}\n","import UnitList from './components/UnitList';\nimport UnitIndexPage from './pages/UnitIndexPage';\nimport UnitShowPage from './pages/UnitShowPage';\nimport UnitListState from './states/UnitListState';\n\nexport const backoffice = {\n    'components/UnitList': UnitList,\n    'pages/UnitIndexPage': UnitIndexPage,\n    'pages/UnitShowPage': UnitShowPage,\n    'states/UnitListState': UnitListState,\n}\n","import Unit from './models/Unit';\n\nexport const common = {\n    'models/Unit': Unit,\n}\n","import {extend} from 'flarum/common/extend';\nimport ActiveLinkButton from 'flamarkt/backoffice/common/components/ActiveLinkButton';\nimport BackofficeNav from 'flamarkt/backoffice/backoffice/components/BackofficeNav';\nimport ProductShowPage from 'flamarkt/core/backoffice/pages/ProductShowPage';\nimport Select from 'flarum/common/components/Select';\nimport Unit from '../common/models/Unit';\nimport UnitIndexPage from './pages/UnitIndexPage';\nimport UnitShowPage from './pages/UnitShowPage';\nimport {backoffice} from './compat';\nimport {common} from '../common/compat';\n\nexport {\n    backoffice,\n    common,\n};\n\napp.initializers.add('flamarkt-units', () => {\n    app.store.models['flamarkt-units'] = Unit;\n\n    app.routes['units.index'] = {\n        path: '/units',\n        component: UnitIndexPage,\n    };\n    app.routes['units.show'] = {\n        path: '/units/:id',\n        component: UnitShowPage,\n    };\n\n    extend(BackofficeNav.prototype, 'items', function (items) {\n        items.add('units', ActiveLinkButton.component({\n            href: app.route('units.index'),\n            icon: 'fas fa-balance-scale-left',\n            activeRoutes: [\n                'units.*',\n            ],\n        }, 'Units'));\n    });\n\n    extend(ProductShowPage.prototype, 'show', function () {\n        this.unit = this.product!.attribute('unit');\n        this.amountMin = this.product!.attribute('amountMinEdit');\n        this.amountMax = this.product!.attribute('amountMaxEdit');\n        this.amountStep = this.product!.attribute('amountStepEdit');\n    });\n\n    extend(ProductShowPage.prototype, 'fields', function (fields) {\n        const options = { //TODO: build from list of units\n            default: 'Default',\n            g: 'Grams',\n        };\n\n        fields.add('unit', m('.Form-group', [\n            m('label', app.translator.trans('flamarkt-units.backoffice.products.field.unit')),\n            Select.component({\n                value: this.unit || 'default',\n                onchange: (value: string) => {\n                    this.unit = value === 'default' ? null : value;\n                    this.dirty = true;\n                },\n                options,\n            }),\n        ]));\n\n        fields.add('amountMin', m('.Form-group', [\n            m('label', app.translator.trans('flamarkt-units.backoffice.products.field.amountMin')),\n            m('input.FormControl', {\n                type: 'number',\n                value: this.amountMin,\n                onchange: (event: Event) => {\n                    const {value} = event.target as HTMLInputElement;\n                    this.amountMin = value === '' ? null : parseInt(value);\n                    this.dirty = true;\n                },\n                options,\n            }),\n        ]));\n\n        fields.add('amountMax', m('.Form-group', [\n            m('label', app.translator.trans('flamarkt-units.backoffice.products.field.amountMax')),\n            m('input.FormControl', {\n                type: 'number',\n                value: this.amountMax,\n                onchange: (event: Event) => {\n                    const {value} = event.target as HTMLInputElement;\n                    this.amountMax = value === '' ? null : parseInt(value);\n                    this.dirty = true;\n                },\n                options,\n            }),\n        ]));\n\n        fields.add('amountStep', m('.Form-group', [\n            m('label', app.translator.trans('flamarkt-units.backoffice.products.field.amountStep')),\n            m('input.FormControl', {\n                type: 'number',\n                value: this.amountStep,\n                onchange: (event: Event) => {\n                    const {value} = event.target as HTMLInputElement;\n                    this.amountStep = value === '' ? null : parseInt(value);\n                    this.dirty = true;\n                },\n                options,\n            }),\n        ]));\n    });\n\n    extend(ProductShowPage.prototype, 'data', function (this: ProductShowPage, data: any) {\n        data.unit = this.unit;\n        data.amountMin = this.amountMin;\n        data.amountMax = this.amountMax;\n        data.amountStep = this.amountStep;\n    });\n});\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","extensions","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","_inheritsLoose","subClass","superClass","create","constructor","Unit","slug","Model","preset","labelSingular","labelPlural","decimals","defaultMin","defaultMax","defaultStep","apiEndpoint","this","exists","data","id","UnitListState","type","AbstractListState","UnitList","head","columns","add","m","unit","actions","LinkButton","className","icon","href","app","route","Button","AbstractList","UnitIndexPage","listState","oninit","vnode","refresh","view","state","Page","UnitShowPage","dirty","saving","newRecord","store","createRecord","findType","show","setTitle","setTitleCount","onsubmit","fields","toArray","LoadingIndicator","ItemList","translator","trans","oninput","event","target","Select","onchange","options","presetOptions","parseInt","SubmitButton","loading","default","g","preventDefault","save","then","redraw","set","error","AbstractShowPage","backoffice","common","initializers","models","routes","path","component","extend","BackofficeNav","items","ActiveLinkButton","activeRoutes","ProductShowPage","product","attribute","amountMin","amountMax","amountStep"],"sourceRoot":""}