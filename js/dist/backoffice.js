(()=>{var t={n:a=>{var n=a&&a.__esModule?()=>a.default:()=>a;return t.d(n,{a:n}),n},d:(a,n)=>{for(var e in n)t.o(n,e)&&!t.o(a,e)&&Object.defineProperty(a,e,{enumerable:!0,get:n[e]})},o:(t,a)=>Object.prototype.hasOwnProperty.call(t,a),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},a={};(()=>{"use strict";t.r(a),t.d(a,{backoffice:()=>E,common:()=>G});const n=flarum.core.compat["common/extend"],e=((flarum.extensions["flamarkt-backoffice"]||{}).common||{})["components/ActiveLinkButton"];var o=t.n(e);const r=((flarum.extensions["flamarkt-backoffice"]||{}).backoffice||{})["components/BackofficeNav"];var i=t.n(r);const u=((flarum.extensions["flamarkt-core"]||{}).backoffice||{})["pages/ProductShowPage"];var l=t.n(u);const s=flarum.core.compat["common/components/Select"];var c=t.n(s);function p(t,a){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,a){return t.__proto__=a,t},p(t,a)}function f(t,a){t.prototype=Object.create(a.prototype),t.prototype.constructor=t,p(t,a)}const d=flarum.core.compat["common/Model"];var h=t.n(d),b=function(t){function a(){for(var a,n=arguments.length,e=new Array(n),o=0;o<n;o++)e[o]=arguments[o];return(a=t.call.apply(t,[this].concat(e))||this).slug=h().attribute("slug"),a.preset=h().attribute("preset"),a.labelSingular=h().attribute("labelSingular"),a.labelPlural=h().attribute("labelPlural"),a.decimals=h().attribute("decimals"),a.defaultMin=h().attribute("defaultMin"),a.defaultMax=h().attribute("defaultMax"),a.defaultStep=h().attribute("defaultStep"),a}return f(a,t),a.prototype.apiEndpoint=function(){return"/flamarkt/units"+(this.exists?"/"+this.data.id:"")},a}(h());const g=flarum.core.compat["common/components/Page"];var v=t.n(g);const y=flarum.core.compat["common/components/LinkButton"];var k=t.n(y);const S=((flarum.extensions["flamarkt-backoffice"]||{}).common||{})["states/AbstractListState"];var x=function(t){function a(){return t.apply(this,arguments)||this}return f(a,t),a.prototype.type=function(){return"flamarkt/units"},a}(t.n(S)());const M=((flarum.extensions["flamarkt-backoffice"]||{}).backoffice||{})["components/AbstractList"];var P=t.n(M);const F=flarum.core.compat["common/components/Button"];var w=t.n(F),O=function(t){function a(){return t.apply(this,arguments)||this}f(a,t);var n=a.prototype;return n.head=function(){var a=t.prototype.head.call(this);return a.add("slug",m("th","Slug")),a},n.columns=function(a){var n=t.prototype.columns.call(this,a);return n.add("slug",m("td",a.slug()),10),n},n.actions=function(a){var n=t.prototype.actions.call(this,a);return n.add("edit",k().component({className:"Button Button--icon",icon:"fas fa-pen",href:app.route("units.show",{id:a.id()})})),n.add("hide",w().component({className:"Button Button--icon",icon:"fas fa-times"})),n},a}(P()),C=function(t){function a(){for(var a,n=arguments.length,e=new Array(n),o=0;o<n;o++)e[o]=arguments[o];return(a=t.call.apply(t,[this].concat(e))||this).listState=void 0,a}f(a,t);var n=a.prototype;return n.oninit=function(a){t.prototype.oninit.call(this,a),this.listState=new x,this.listState.refresh()},n.view=function(){return m(".UnitIndexPage",m(".container",[m(".Form-group",[k().component({className:"Button",href:app.route("units.show",{id:"new"})},"New unit")]),m(O,{state:this.listState})]))},a}(v());const I=((flarum.extensions["flamarkt-backoffice"]||{}).common||{})["pages/AbstractShowPage"];var B=t.n(I);const A=((flarum.extensions["flamarkt-backoffice"]||{}).backoffice||{})["components/SubmitButton"];var L=t.n(A);const U=flarum.core.compat["common/components/LoadingIndicator"];var _=t.n(U);const j=flarum.core.compat["common/utils/ItemList"];var N=t.n(j),T=function(t){function a(){for(var a,n=arguments.length,e=new Array(n),o=0;o<n;o++)e[o]=arguments[o];return(a=t.call.apply(t,[this].concat(e))||this).unit=null,a.dirty=!1,a.saving=!1,a.slug="",a.preset=null,a.labelSingular="",a.labelPlural="",a.decimals=0,a.defaultMin=null,a.defaultMax=null,a.defaultStep=null,a}f(a,t);var n=a.prototype;return n.newRecord=function(){return app.store.createRecord("flamarkt-units")},n.findType=function(){return"flamarkt/units"},n.show=function(t){this.unit=t,this.slug=t.slug()||"",this.preset=t.preset()||null,this.labelSingular=t.labelSingular()||"",this.labelPlural=t.labelPlural()||"",this.decimals=t.decimals()||0,this.defaultMin=t.defaultMin(),this.defaultMax=t.defaultMax(),this.defaultStep=t.defaultStep(),app.setTitle(t.slug()),app.setTitleCount(0)},n.view=function(){return this.unit?m("form.UnitShowPage",{onsubmit:this.onsubmit.bind(this)},m(".container",this.fields().toArray())):_().component()},n.fields=function(){var t=this,a=new(N());return a.add("slug",m(".Form-group",[m("label",app.translator.trans("flamarkt-units.backoffice.units.field.slug")),m("input.FormControl",{type:"text",value:this.slug,oninput:function(a){t.slug=a.target.value,t.dirty=!0}})])),a.add("preset",m(".Form-group",[m("label",app.translator.trans("flamarkt-units.backoffice.units.field.preset")),c().component({value:this.preset||"default",onchange:function(a){t.preset="default"===a?null:a,t.dirty=!0},options:this.presetOptions()})])),a.add("labelSingular",m(".Form-group",[m("label",app.translator.trans("flamarkt-units.backoffice.units.field.labelSingular")),m("input.FormControl",{type:"text",value:this.labelSingular,oninput:function(a){t.labelSingular=a.target.value,t.dirty=!0}})])),a.add("labelPlural",m(".Form-group",[m("label",app.translator.trans("flamarkt-units.backoffice.units.field.labelPlural")),m("input.FormControl",{type:"text",value:this.labelPlural,oninput:function(a){t.labelPlural=a.target.value,t.dirty=!0}})])),a.add("decimals",m(".Form-group",[m("label",app.translator.trans("flamarkt-units.backoffice.units.field.decimals")),m("input.FormControl",{type:"number",value:this.decimals,onchange:function(a){t.decimals=parseInt(a.target.value),t.dirty=!0}})])),a.add("defaultMin",m(".Form-group",[m("label",app.translator.trans("flamarkt-units.backoffice.units.field.defaultMin")),m("input.FormControl",{type:"number",value:this.defaultMin,onchange:function(a){var n=a.target.value;t.defaultMin=""===n?null:parseInt(n),t.dirty=!0}})])),a.add("defaultMax",m(".Form-group",[m("label",app.translator.trans("flamarkt-units.backoffice.units.field.defaultMax")),m("input.FormControl",{type:"number",value:this.defaultMax,onchange:function(a){var n=a.target.value;t.defaultMax=""===n?null:parseInt(n),t.dirty=!0}})])),a.add("defaultStep",m(".Form-group",[m("label",app.translator.trans("flamarkt-units.backoffice.units.field.defaultStep")),m("input.FormControl",{type:"number",value:this.defaultStep,onchange:function(a){var n=a.target.value;t.defaultStep=""===n?null:parseInt(n),t.dirty=!0}})])),a.add("submit",m(".Form-group",[L().component({loading:this.saving,dirty:this.dirty,exists:this.unit.exists})]),-10),a},n.presetOptions=function(){return{default:"No preset",g:"Grams / KG"}},n.data=function(){return{slug:this.slug,preset:this.preset,labelSingular:this.labelSingular,labelPlural:this.labelPlural,decimals:this.decimals,defaultMin:this.defaultMin,defaultMax:this.defaultMax,defaultStep:this.defaultStep}},n.onsubmit=function(t){var a=this;t.preventDefault(),this.saving=!0,this.unit.save(this.data()).then((function(t){a.unit=t,a.saving=!1,a.dirty=!1,m.redraw(),m.route.set(app.route("units.show",{id:t.id()}))})).catch((function(t){a.saving=!1,m.redraw()}))},a}(B()),E={"components/UnitList":O,"pages/UnitIndexPage":C,"pages/UnitShowPage":T,"states/UnitListState":x},G={"models/Unit":b};app.initializers.add("flamarkt-units",(function(){app.store.models["flamarkt-units"]=b,app.routes["units.index"]={path:"/units",component:C},app.routes["units.show"]={path:"/units/:id",component:T},(0,n.extend)(i().prototype,"items",(function(t){t.add("units",o().component({href:app.route("units.index"),icon:"fas fa-balance-scale-left",activeRoutes:["units.*"]},"Units"))})),(0,n.extend)(l().prototype,"show",(function(){this.unit=this.product.attribute("unit"),this.amountMin=this.product.attribute("amountMinEdit"),this.amountMax=this.product.attribute("amountMaxEdit"),this.amountStep=this.product.attribute("amountStepEdit")})),(0,n.extend)(l().prototype,"fields",(function(t){var a=this,n={default:"Default",g:"Grams"};t.add("unit",m(".Form-group",[m("label",app.translator.trans("flamarkt-units.backoffice.products.field.unit")),c().component({value:this.unit||"default",onchange:function(t){a.unit="default"===t?null:t,a.dirty=!0},options:n})])),t.add("amountMin",m(".Form-group",[m("label",app.translator.trans("flamarkt-units.backoffice.products.field.amountMin")),m("input.FormControl",{type:"number",value:this.amountMin,onchange:function(t){var n=t.target.value;a.amountMin=""===n?null:parseInt(n),a.dirty=!0},options:n})])),t.add("amountMax",m(".Form-group",[m("label",app.translator.trans("flamarkt-units.backoffice.products.field.amountMax")),m("input.FormControl",{type:"number",value:this.amountMax,onchange:function(t){var n=t.target.value;a.amountMax=""===n?null:parseInt(n),a.dirty=!0},options:n})])),t.add("amountStep",m(".Form-group",[m("label",app.translator.trans("flamarkt-units.backoffice.products.field.amountStep")),m("input.FormControl",{type:"number",value:this.amountStep,onchange:function(t){var n=t.target.value;a.amountStep=""===n?null:parseInt(n),a.dirty=!0},options:n})]))})),(0,n.extend)(l().prototype,"data",(function(t){t.unit=this.unit,t.amountMin=this.amountMin,t.amountMax=this.amountMax,t.amountStep=this.amountStep}))}))})(),module.exports=a})();
//# sourceMappingURL=backoffice.js.map